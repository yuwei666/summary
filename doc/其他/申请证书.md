## 注册免费证书



[zeroSSL](https://app.zerossl.com/certificates)，注册登陆

1. 打开 https://zerossl.com

2. 选择 “**New Certificate**”

3. 输入你的域名：`www.zyspace.com.cn`

4. 然后按提示完成 DNS 验证

   1. 在阿里云-云解析 DNS-域名-解析设置-添加记录

   2. 类型选择cname，主机记录填写name(无后缀)，记录值填Point To，然后等着验证通过

   3. server type选择 nginx，下载

   4. 将 zyspace.com.cn.zip 上传到服务器，解压放入/etc/nginx/ssl目录下，共3个文件

   5. 将文件合成一个，便于配置nginx

      ```bash
      # root用户使用
      cat /etc/nginx/ssl/certificate.crt /etc/nginx/ssl/ca_bundle.crt > /etc/nginx/ssl/fullchain.crt
      
      # 没有权限执行下面这个
      sudo sh -c 'cat /etc/nginx/ssl/certificate.crt /etc/nginx/ssl/ca_bundle.crt > /etc/nginx/ssl/fullchain.crt'
      ```

5. 配置nginx

   ```ng
   # HTTP 到 HTTPS 重定向配置
   server {
       listen 80;
       server_name www.zyspace.com.cn;
   
       # 强制将 HTTP 请求重定向到 HTTPS
       return 301 https://$host$request_uri;
   }
   
   server {
       listen 443 ssl;
       server_name www.zyspace.com.cn;
   
       ssl_certificate     /etc/nginx/ssl/fullchain.crt;
       ssl_certificate_key /etc/nginx/ssl/private.key;
   
       ssl_protocols TLSv1.2 TLSv1.3;
       ssl_ciphers HIGH:!aNULL:!MD5;
       ssl_prefer_server_ciphers on;
   
       location / {
           root /usr/share/nginx/html;
           index index.html index.htm;
       }
   }
   ```

6. 重启ng即可

   ```bash
   nginx -t && systemctl nginx -s reload
   ```

   